function showMenu(){$("#menu-btn").addClass("active"),$("#menu").slideDown("fast")}function hideMenu(){$("#menu-btn").removeClass("active"),$("#menu").slideUp("fast")}function setupStickyActions(){var length=$("#main-actions").height()-$("#sidebar").height()+$("#main-actions").offset().top;$(window).scroll(function(){var scroll=$(this).scrollTop(),height=$("#sidebar").height()+"px";$("#sidebar").css(scroll<$("#main-actions").offset().top?{position:"absolute",top:"0"}:scroll>length?{position:"absolute",bottom:"0",top:"auto"}:{position:"fixed",top:"0",height:height})})}function setupTabContainer(){$(".nav-tab-container").each(function(){$(this).after('<div class="nav-tab-scrollers"><span class="fa fa-chevron-left scroller scroll-left hidden"></span><span class="fa fa-chevron-right scroller scroll-right hidden"></span></div>'),obj=$(this),setTimeout(function(){showInitialTabScrollers(obj),obj.find(".active").find("a").click()},500)})}function showInitialTabScrollers(tabcontainer){tabwidth=0,containerwidth=tabcontainer.innerWidth(),tabcontainer.find("li").each(function(i,elem){tabwidth+=$(elem).outerWidth(!0)}),tabwidth>containerwidth&&tabcontainer.next(".nav-tab-scrollers").find(".scroll-right").removeClass("hidden")}function getByName(name){return $("[name='"+name+"']")}function processShowItems(){show_items=$("[data-show-when]"),show_items.each(function(){if(observed_items=$(this).data("show-when").replace(/\s+/g,"").split(","),watched_value=[],watched_value_not=[],void 0!=$(this).data("show-when-value"))try{watched_value=eval(String($(this).data("show-when-value")))}catch(err){console.log("Malformed show-when-value")}else if(void 0!=$(this).data("show-when-value-not"))try{watched_value_not=eval(String($(this).data("show-when-value-not")))||[]}catch(err){console.log("Malformed show-when-value-not")}target=$(this),container=target.parents(".form-group").first(),$.each(observed_items,function(i,v){observed=$("[name='"+v+"']"),target.parents(".multi-field-item").length>0&&(observed=target.parents(".multi-field-item").first().find("[name='"+v+"']")),checkWatchedValues(observed,target,watched_value,watched_value_not,container),observeItems(observed,target,watched_value,watched_value_not,container)})})}function observeItems(observed,target,watched_value,watched_value_not,container){observed.on("change",{observed:observed,target:target,watched_value:watched_value,watched_value_not:watched_value_not,container:container},function(event){checkWatchedValues(event.data.observed,event.data.target,event.data.watched_value,event.data.watched_value_not,event.data.container)})}function checkWatchedValues(observed,target,watched_value,watched_value_not,container){watched_value&&watched_value.length>0?$.inArray(String(observed.getValue()).replace(/\s+/g,""),watched_value)>-1?container.showField():container.hideField():watched_value_not&&watched_value_not.length>0&&($.inArray(String(observed.getValue()).replace(/\s+/g,""),watched_value_not)>-1?container.hideField():container.showField())}function processMultiFieldItems(){$("[data-multi-field-preload='true']").each(function(){try{root=$(this).parents(".multi-field").first(),root.find(".multi-field-btn-add").click()}catch(err){}})}function setupValidators(){function ensureMaxLengthAndFormat(event){if(elem=$(event.target),pos=elem[0].selectionStart,value=elem.val(),length=value.length,maxlength=parseInt(elem.data("length-max")),remaining=maxlength-length,eventType=event.type,data="","paste"==eventType?data=(event.originalEvent||event).clipboardData.getData("text/plain").substring(0,remaining):(data=event.which||event.charCode,console.log(data)),length>=maxlength){if("paste"==eventType)return event.preventDefault(),!1;if(!(event.metaKey||event.ctrlKey||event.altKey||event.shiftKey))return console.log("prevented"),event.preventDefault(),!1}else if("paste"==eventType)return new_value=value.substring(0,pos)+data+value.substring(pos,length),pos+=data.length,elem.val(new_value),elem[0].selectionStart=pos,elem[0].selectionEnd=pos,event.preventDefault(),!1}$(document).on("submit","form",function(){}),$(".required").each(function(){"true"!=$(this).data("observed-required")&&($(this).data("observed-required","true").parents(".form-group").append('<div class="required-mark"><span class="fa fa-star"> REQUIRED</span></div>'),field=getByName($(this).attr("name")),""!=field.getValue()&&field.parents(".form-group").find(".required-mark").hide(),field.on("input change blur",function(){""==$(this).getValue()?$(this).addClass("error").parents(".form-group").find(".required-mark").fadeIn("fast"):$(this).removeClass("error").parents(".form-group").find(".required-mark").fadeOut("fast")}))}),numericalValidators=[".integer",".decimal",".rate"],characterValidators=[".alpha",".alphanumeric",".email",".phone",".date"],signValidators=[".positive",".negative"],formatValidators=numericalValidators.concat(characterValidators).concat(signValidators),validators=formatValidators.concat(["[data-length-max]"]),$(validators.join()).each(function(){$(this).on("input",function(event){ensureMaxLengthAndFormat(event)})})}function showSpinner(){$("#spinner").fadeIn("fast"),$("html, body").css({overflow:"hidden",height:"100%"})}function hideSpinner(){$("#spinner").fadeOut("fast"),$("html, body").css({overflow:"auto",height:"auto"})}function datepickerInitializer(){$(".input-group.date").datepicker({format:"mm/dd/yyyy",todayBtn:"linked",multidate:!1,autoclose:!0,todayHighlight:!0})}"undefined"!=typeof jQuery&&!function($){$("#spinner").ajaxStart(function(){$(this).fadeIn()}).ajaxStop(function(){$(this).fadeOut()})}(jQuery),$(document).on("click","#menu-btn",function(e){return $(this).hasClass("active")?hideMenu():showMenu(),e.preventDefault(),!1}),$(document).on("keyup click",function(e){(27==e.keyCode||"click"==e.type)&&hideMenu()}),$(document).on("click","#menu",function(e){e.stopPropagation()}),$(document).on("click",".scroll-left",function(){tabs=$(this).parents(".nav-tab-scrollers").prev(".nav-tab-container"),containerwidth=tabs.innerWidth(),scrollposition=tabs.scrollLeft(),tabwidth=0,tabstop=0,tabs.find("li").each(function(i,elem){width=$(elem).outerWidth(!0),tabwidth+=width,scrollposition-containerwidth>tabstop&&(tabstop+=width)}),scrollposition>containerwidth?(tabs.animate({scrollLeft:tabstop},500),$(this).next(".scroll-right").removeClass("hidden")):scrollposition>0&&(tabs.animate({scrollLeft:0},500),$(this).next(".scroll-right").removeClass("hidden"),$(this).addClass("hidden"))}),$(document).on("click",".scroll-right",function(){tabs=$(this).parents(".nav-tab-scrollers").prev(".nav-tab-container"),containerwidth=tabs.innerWidth(),scrollposition=tabs.scrollLeft(),tabwidth=0,tabstop=0,tabs.find("li").each(function(i,elem){width=$(elem).outerWidth(!0),tabwidth+=width,scrollposition+containerwidth>tabstop+width&&(tabstop+=width)}),tabwidth>tabstop&&(tabs.animate({scrollLeft:tabstop},500),$(this).prev(".scroll-left").removeClass("hidden")),tabstop+containerwidth>tabwidth&&$(this).addClass("hidden")}),$(document).on("click","[data-toggle='tab']",function(){tabcontainer=$(this).parents(".nav-tab-container"),containeroffset=tabcontainer.offset().left,containeredge=containeroffset+tabcontainer.innerWidth(),tabedge=$(this).offset().left+$(this).outerWidth(!0),tabedge>containeredge&&(tabstop=0,li=$(this).parents("li").first(),tabcontainer.find("li").each(function(i,elem){return width=$(elem).outerWidth(!0),$(elem).is(li)?!1:void(tabstop+=width)}),tabcontainer.next(".nav-tab-scrollers").find(".scroll-right").click())}),$.fn.getValue=function(){return field_object=$(this).first(),(field_object.is(":radio")||field_object.is(":checkbox"))&&(field_object=getByName(field_object.attr("name")).filter(":checked")),field_object.val()||""},$.fn.hideField=function(initial){initial?$(this).hide():$(this).slideUp("fast")},$.fn.showField=function(initial){initial?$(this).show():$(this).slideDown("fast")},$(document).off("click",".multi-field-btn-add").on("click",".multi-field-btn-add",function(e){root=$(this).parents(".multi-field").first(),template=root.find(".multi-field-template"),maxlength=3,currentlength=root.find(".multi-field-item:not(.multi-field-template):not(:hidden)").length+1;try{maxlength=parseInt(template.data("multi-field-max"))}catch(err){}return new_item=template.clone().removeClass("multi-field-template").css("display","none"),timestamp=(new Date).getTime(),new_item.find("input, textarea, button").each(function(){$(this).attr("id",$(this).attr("id")+"_"+timestamp)}),new_item.find("label").each(function(){$(this).attr("for",$(this).attr("for")+"_"+timestamp)}),new_item.insertBefore(template).slideDown("fast",function(){currentlength>=maxlength&&root.find(".multi-field-btn-add").hide()}),root.find(".multi-field-btn-delete").show(),processShowItems(),datepickerInitializer(),e.preventDefault(),!1}),$(document).off("click",".multi-field-btn-delete").on("click",".multi-field-btn-delete",function(e){root=$(this).parents(".multi-field").first(),template=root.find(".multi-field-template"),maxlength=3;try{maxlength=parseInt(template.data("multi-field-max"))}catch(err){}return $(this).parents(".multi-field-item").first().slideUp("fast",function(){"true"==String($(this).data("multi-field-existing"))?$(this).find("[data-field-type='delete']").val("true"):$(this).remove(),root.find(".multi-field-item:not(.multi-field-template):not(:hidden)").length<maxlength&&root.find(".multi-field-btn-add").show(),root.find(".multi-field-item:not(.multi-field-template):not(:hidden)").length<1&&root.find(".multi-field-btn-add").click()}),processShowItems(),e.preventDefault(),!1}),$(document).on("ajaxSend",showSpinner).on("ajaxStop",function(){hideSpinner()}).on("ajaxError",function(){hideSpinner()}),$(document).ready(function(){setupTabContainer(),$("#main-actions").length&&setupStickyActions(),$("#menu-filter").treeListFilter("#menu-content",200),processShowItems(),processMultiFieldItems(),setupValidators(),$("select").select2({allowClear:!0}),datepickerInitializer()}),$(function(){$.fn.modal.Constructor.DEFAULTS.backdrop="static"});