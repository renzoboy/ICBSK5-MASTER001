!function($){function drawSeries(plot,ctx,series){var plotOffset=plot.getPlotOffset();if(series.images&&series.images.show)for(var points=series.datapoints.points,ps=series.datapoints.pointsize,i=0;i<points.length;i+=ps){var tmp,img=points[i],x1=points[i+1],y1=points[i+2],x2=points[i+3],y2=points[i+4],xaxis=series.xaxis,yaxis=series.yaxis;if(!(!img||img.width<=0||img.height<=0||(x1>x2&&(tmp=x2,x2=x1,x1=tmp),y1>y2&&(tmp=y2,y2=y1,y1=tmp),"center"==series.images.anchor&&(tmp=.5*(x2-x1)/(img.width-1),x1-=tmp,x2+=tmp,tmp=.5*(y2-y1)/(img.height-1),y1-=tmp,y2+=tmp),x1==x2||y1==y2||x1>=xaxis.max||x2<=xaxis.min||y1>=yaxis.max||y2<=yaxis.min))){var sx1=0,sy1=0,sx2=img.width,sy2=img.height;x1<xaxis.min&&(sx1+=(sx2-sx1)*(xaxis.min-x1)/(x2-x1),x1=xaxis.min),x2>xaxis.max&&(sx2+=(sx2-sx1)*(xaxis.max-x2)/(x2-x1),x2=xaxis.max),y1<yaxis.min&&(sy2+=(sy1-sy2)*(yaxis.min-y1)/(y2-y1),y1=yaxis.min),y2>yaxis.max&&(sy1+=(sy1-sy2)*(yaxis.max-y2)/(y2-y1),y2=yaxis.max),x1=xaxis.p2c(x1),x2=xaxis.p2c(x2),y1=yaxis.p2c(y1),y2=yaxis.p2c(y2),x1>x2&&(tmp=x2,x2=x1,x1=tmp),y1>y2&&(tmp=y2,y2=y1,y1=tmp),tmp=ctx.globalAlpha,ctx.globalAlpha*=series.images.alpha,ctx.drawImage(img,sx1,sy1,sx2-sx1,sy2-sy1,x1+plotOffset.left,y1+plotOffset.top,x2-x1,y2-y1),ctx.globalAlpha=tmp}}}function processRawData(plot,series,data,datapoints){series.images.show&&(datapoints.format=[{required:!0},{x:!0,number:!0,required:!0},{y:!0,number:!0,required:!0},{x:!0,number:!0,required:!0},{y:!0,number:!0,required:!0}])}function init(plot){plot.hooks.processRawData.push(processRawData),plot.hooks.drawSeries.push(drawSeries)}var options={series:{images:{show:!1,alpha:1,anchor:"corner"}}};$.plot.image={},$.plot.image.loadDataImages=function(series,options,callback){var urls=[],points=[],defaultShow=options.series.images.show;$.each(series,function(i,s){(defaultShow||s.images.show)&&(s.data&&(s=s.data),$.each(s,function(i,p){"string"==typeof p[0]&&(urls.push(p[0]),points.push(p))}))}),$.plot.image.load(urls,function(loadedImages){$.each(points,function(i,p){var url=p[0];loadedImages[url]&&(p[0]=loadedImages[url])}),callback()})},$.plot.image.load=function(urls,callback){var missing=urls.length,loaded={};0==missing&&callback({}),$.each(urls,function(i,url){var handler=function(){--missing,loaded[url]=this,0==missing&&callback(loaded)};$("<img />").load(handler).error(handler).attr("src",url)})},$.plot.plugins.push({init:init,options:options,name:"image",version:"1.1"})}(jQuery);