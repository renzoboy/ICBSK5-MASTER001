!function($){function init(plot){function onMouseOut(){crosshair.locked||-1!=crosshair.x&&(crosshair.x=-1,plot.triggerRedrawOverlay())}function onMouseMove(e){if(!crosshair.locked){if(plot.getSelection&&plot.getSelection())return void(crosshair.x=-1);var offset=plot.offset();crosshair.x=Math.max(0,Math.min(e.pageX-offset.left,plot.width())),crosshair.y=Math.max(0,Math.min(e.pageY-offset.top,plot.height())),plot.triggerRedrawOverlay()}}var crosshair={x:-1,y:-1,locked:!1};plot.setCrosshair=function(pos){if(pos){var o=plot.p2c(pos);crosshair.x=Math.max(0,Math.min(o.left,plot.width())),crosshair.y=Math.max(0,Math.min(o.top,plot.height()))}else crosshair.x=-1;plot.triggerRedrawOverlay()},plot.clearCrosshair=plot.setCrosshair,plot.lockCrosshair=function(pos){pos&&plot.setCrosshair(pos),crosshair.locked=!0},plot.unlockCrosshair=function(){crosshair.locked=!1},plot.hooks.bindEvents.push(function(plot,eventHolder){plot.getOptions().crosshair.mode&&(eventHolder.mouseout(onMouseOut),eventHolder.mousemove(onMouseMove))}),plot.hooks.drawOverlay.push(function(plot,ctx){var c=plot.getOptions().crosshair;if(c.mode){var plotOffset=plot.getPlotOffset();if(ctx.save(),ctx.translate(plotOffset.left,plotOffset.top),-1!=crosshair.x){var adj=plot.getOptions().crosshair.lineWidth%2===0?0:.5;if(ctx.strokeStyle=c.color,ctx.lineWidth=c.lineWidth,ctx.lineJoin="round",ctx.beginPath(),-1!=c.mode.indexOf("x")){var drawX=Math.round(crosshair.x)+adj;ctx.moveTo(drawX,0),ctx.lineTo(drawX,plot.height())}if(-1!=c.mode.indexOf("y")){var drawY=Math.round(crosshair.y)+adj;ctx.moveTo(0,drawY),ctx.lineTo(plot.width(),drawY)}ctx.stroke()}ctx.restore()}}),plot.hooks.shutdown.push(function(plot,eventHolder){eventHolder.unbind("mouseout",onMouseOut),eventHolder.unbind("mousemove",onMouseMove)})}var options={crosshair:{mode:null,color:"rgba(170, 0, 0, 0.80)",lineWidth:1}};$.plot.plugins.push({init:init,options:options,name:"crosshair",version:"1.0"})}(jQuery);