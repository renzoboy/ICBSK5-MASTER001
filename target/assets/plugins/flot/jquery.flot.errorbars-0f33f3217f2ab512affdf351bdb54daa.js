!function($){function processRawData(plot,series,data,datapoints){if(series.points.errorbars){var format=[{x:!0,number:!0,required:!0},{y:!0,number:!0,required:!0}],errors=series.points.errorbars;("x"==errors||"xy"==errors)&&(series.points.xerr.asymmetric?(format.push({x:!0,number:!0,required:!0}),format.push({x:!0,number:!0,required:!0})):format.push({x:!0,number:!0,required:!0})),("y"==errors||"xy"==errors)&&(series.points.yerr.asymmetric?(format.push({y:!0,number:!0,required:!0}),format.push({y:!0,number:!0,required:!0})):format.push({y:!0,number:!0,required:!0})),datapoints.format=format}}function parseErrors(series,i){var points=series.datapoints.points,exl=null,exu=null,eyl=null,eyu=null,xerr=series.points.xerr,yerr=series.points.yerr,eb=series.points.errorbars;"x"==eb||"xy"==eb?xerr.asymmetric?(exl=points[i+2],exu=points[i+3],"xy"==eb&&(yerr.asymmetric?(eyl=points[i+4],eyu=points[i+5]):eyl=points[i+4])):(exl=points[i+2],"xy"==eb&&(yerr.asymmetric?(eyl=points[i+3],eyu=points[i+4]):eyl=points[i+3])):"y"==eb&&(yerr.asymmetric?(eyl=points[i+2],eyu=points[i+3]):eyl=points[i+2]),null==exu&&(exu=exl),null==eyu&&(eyu=eyl);var errRanges=[exl,exu,eyl,eyu];return xerr.show||(errRanges[0]=null,errRanges[1]=null),yerr.show||(errRanges[2]=null,errRanges[3]=null),errRanges}function drawSeriesErrors(plot,ctx,s){var points=s.datapoints.points,ps=s.datapoints.pointsize,ax=[s.xaxis,s.yaxis],radius=s.points.radius,err=[s.points.xerr,s.points.yerr],invertX=!1;if(ax[0].p2c(ax[0].max)<ax[0].p2c(ax[0].min)){invertX=!0;var tmp=err[0].lowerCap;err[0].lowerCap=err[0].upperCap,err[0].upperCap=tmp}var invertY=!1;if(ax[1].p2c(ax[1].min)<ax[1].p2c(ax[1].max)){invertY=!0;var tmp=err[1].lowerCap;err[1].lowerCap=err[1].upperCap,err[1].upperCap=tmp}for(var i=0;i<s.datapoints.points.length;i+=ps)for(var errRanges=parseErrors(s,i),e=0;e<err.length;e++){var minmax=[ax[e].min,ax[e].max];if(errRanges[e*err.length]){var x=points[i],y=points[i+1],upper=[x,y][e]+errRanges[e*err.length+1],lower=[x,y][e]-errRanges[e*err.length];if("x"==err[e].err&&(y>ax[1].max||y<ax[1].min||upper<ax[0].min||lower>ax[0].max))continue;if("y"==err[e].err&&(x>ax[0].max||x<ax[0].min||upper<ax[1].min||lower>ax[1].max))continue;var drawUpper=!0,drawLower=!0;if(upper>minmax[1]&&(drawUpper=!1,upper=minmax[1]),lower<minmax[0]&&(drawLower=!1,lower=minmax[0]),"x"==err[e].err&&invertX||"y"==err[e].err&&invertY){var tmp=lower;lower=upper,upper=tmp,tmp=drawLower,drawLower=drawUpper,drawUpper=tmp,tmp=minmax[0],minmax[0]=minmax[1],minmax[1]=tmp}x=ax[0].p2c(x),y=ax[1].p2c(y),upper=ax[e].p2c(upper),lower=ax[e].p2c(lower),minmax[0]=ax[e].p2c(minmax[0]),minmax[1]=ax[e].p2c(minmax[1]);var lw=err[e].lineWidth?err[e].lineWidth:s.points.lineWidth,sw=null!=s.points.shadowSize?s.points.shadowSize:s.shadowSize;if(lw>0&&sw>0){var w=sw/2;ctx.lineWidth=w,ctx.strokeStyle="rgba(0,0,0,0.1)",drawError(ctx,err[e],x,y,upper,lower,drawUpper,drawLower,radius,w+w/2,minmax),ctx.strokeStyle="rgba(0,0,0,0.2)",drawError(ctx,err[e],x,y,upper,lower,drawUpper,drawLower,radius,w/2,minmax)}ctx.strokeStyle=err[e].color?err[e].color:s.color,ctx.lineWidth=lw,drawError(ctx,err[e],x,y,upper,lower,drawUpper,drawLower,radius,0,minmax)}}}function drawError(ctx,err,x,y,upper,lower,drawUpper,drawLower,radius,offset,minmax){y+=offset,upper+=offset,lower+=offset,"x"==err.err?(upper>x+radius?drawPath(ctx,[[upper,y],[Math.max(x+radius,minmax[0]),y]]):drawUpper=!1,x-radius>lower?drawPath(ctx,[[Math.min(x-radius,minmax[1]),y],[lower,y]]):drawLower=!1):(y-radius>upper?drawPath(ctx,[[x,upper],[x,Math.min(y-radius,minmax[0])]]):drawUpper=!1,lower>y+radius?drawPath(ctx,[[x,Math.max(y+radius,minmax[1])],[x,lower]]):drawLower=!1),radius=null!=err.radius?err.radius:radius,drawUpper&&("-"==err.upperCap?"x"==err.err?drawPath(ctx,[[upper,y-radius],[upper,y+radius]]):drawPath(ctx,[[x-radius,upper],[x+radius,upper]]):$.isFunction(err.upperCap)&&("x"==err.err?err.upperCap(ctx,upper,y,radius):err.upperCap(ctx,x,upper,radius))),drawLower&&("-"==err.lowerCap?"x"==err.err?drawPath(ctx,[[lower,y-radius],[lower,y+radius]]):drawPath(ctx,[[x-radius,lower],[x+radius,lower]]):$.isFunction(err.lowerCap)&&("x"==err.err?err.lowerCap(ctx,lower,y,radius):err.lowerCap(ctx,x,lower,radius)))}function drawPath(ctx,pts){ctx.beginPath(),ctx.moveTo(pts[0][0],pts[0][1]);for(var p=1;p<pts.length;p++)ctx.lineTo(pts[p][0],pts[p][1]);ctx.stroke()}function draw(plot,ctx){var plotOffset=plot.getPlotOffset();ctx.save(),ctx.translate(plotOffset.left,plotOffset.top),$.each(plot.getData(),function(i,s){s.points.errorbars&&(s.points.xerr.show||s.points.yerr.show)&&drawSeriesErrors(plot,ctx,s)}),ctx.restore()}function init(plot){plot.hooks.processRawData.push(processRawData),plot.hooks.draw.push(draw)}var options={series:{points:{errorbars:null,xerr:{err:"x",show:null,asymmetric:null,upperCap:null,lowerCap:null,color:null,radius:null},yerr:{err:"y",show:null,asymmetric:null,upperCap:null,lowerCap:null,color:null,radius:null}}}};$.plot.plugins.push({init:init,options:options,name:"errorbars",version:"1.0"})}(jQuery);