!function($){function init(plot){function thresholdData(plot,s,datapoints,below,color){var i,x,y,p,prevp,ps=datapoints.pointsize,thresholded=$.extend({},s);thresholded.datapoints={points:[],pointsize:ps,format:datapoints.format},thresholded.label=null,thresholded.color=color,thresholded.threshold=null,thresholded.originSeries=s,thresholded.data=[];var m,origpoints=datapoints.points,addCrossingPoints=s.lines.show,threspoints=[],newpoints=[];for(i=0;i<origpoints.length;i+=ps){if(x=origpoints[i],y=origpoints[i+1],prevp=p,p=below>y?threspoints:newpoints,addCrossingPoints&&prevp!=p&&null!=x&&i>0&&null!=origpoints[i-ps]){var interx=x+(below-y)*(x-origpoints[i-ps])/(y-origpoints[i-ps+1]);for(prevp.push(interx),prevp.push(below),m=2;ps>m;++m)prevp.push(origpoints[i+m]);for(p.push(null),p.push(null),m=2;ps>m;++m)p.push(origpoints[i+m]);for(p.push(interx),p.push(below),m=2;ps>m;++m)p.push(origpoints[i+m])}for(p.push(x),p.push(y),m=2;ps>m;++m)p.push(origpoints[i+m])}if(datapoints.points=newpoints,thresholded.datapoints.points=threspoints,thresholded.datapoints.points.length>0){var origIndex=$.inArray(s,plot.getData());plot.getData().splice(origIndex+1,0,thresholded)}}function processThresholds(plot,s,datapoints){s.threshold&&(s.threshold instanceof Array?(s.threshold.sort(function(a,b){return a.below-b.below}),$(s.threshold).each(function(i,th){thresholdData(plot,s,datapoints,th.below,th.color)})):thresholdData(plot,s,datapoints,s.threshold.below,s.threshold.color))}plot.hooks.processDatapoints.push(processThresholds)}var options={series:{threshold:null}};$.plot.plugins.push({init:init,options:options,name:"threshold",version:"1.2"})}(jQuery);