ns("icbs.Dependencies"),icbs.Dependencies.Ajax={run:function(params){var url=params.url,data=params.params,callback=params.callback,callbackParams=params.callbackParams,errorCallback=params.errorCallback,errorCallbackParams=params.errorCallbackParams,type="POST",dataType=params.dataType||"html";jQuery.ajax({type:type,data:data,url:url,dataType:dataType,success:function(data){"function"==typeof callback&&callback(data,callbackParams)},error:function(){"function"==typeof errorCallback&&errorCallback(data,errorCallbackParams)}})},addLoadEvent:function(func){var oldonload=window.onload;window.onload="function"!=typeof window.onload?func:function(){oldonload&&oldonload(),func()}}},ns("icbs.UI"),icbs.UI.Modal=function(params){var self=this,url=params.url,isRemote=url?!0:!1,title=params.title,id=params.id;this.id=params.id;var modalClass=params.modalClass||"modal-wide fade",content=params.url||params.content||"default-content",onShowCallback=params.onShowCallback,onShowCallbackParams=params.onShowCallbackParams||{},onCloseCallback=params.onCloseCallback;this.onCloseCallbackParams=params.onCloseCallbackParams||{};var buttonClass=params.buttonClass,params=params.params,create=function(){var modal='<div id="'+id+'" class="modal '+modalClass+'">';modal+='<div class="modal-dialog">',modal+='<div class="modal-content">',modal+='<div class="modal-header">',modal+='<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>',modal+='<h4 class="modal-title">'+title+"</h4>",modal+="</div>",modal+='<div class="modal-body">',modal+="</div>",modal+='<div class="modal-footer">',modal+='<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>',modal+="</div>",modal+="</div><!-- /.modal-content -->",modal+="</div><!-- /.modal-dialog -->",modal+="</div><!-- /.modal -->",jQuery("#modal-append-div").append(modal)},setRemoteContentCallback=function(data){console.log("srcc "+data),jQuery("#"+id+" .modal-body").html(data)},setContent=function(){isRemote?icbs.Dependencies.Ajax.run({url:url,callback:setRemoteContentCallback,params:params,callbackParams:onShowCallback}):(jQuery("#"+id+" .modal-body").html(content),console.log("sc "+content))};this.show=function(params){onShowCallbackParams=params,console.log("showmodal"),console.log("modal id:"+id),jQuery("#"+id).modal("show")},this.close=function(){},this.addOnCloseCallbackParams=function(key,val){self.onCloseCallbackParams[key]=val,console.log(self.onCloseCallbackParams),console.log("pasok sa onclose"),console.log(val),console.log(JSON.stringify(self.onCloseCallbackParams))},$(document).ready(function(){create(),buttonClass&&$("."+buttonClass).click(function(){self.show()}),$("#"+id).on("hidden.bs.modal",function(){console.log("Pasok sa create modal"),console.log("Catch ID +"+id);var element=document.getElementById(self.id);console.log("get elemet:"+element),element.parentNode.removeChild(element),$("#"+self.id).html(""),console.log(self.id),"function"==typeof onCloseCallback&&(console.log("onCloseCallback is a function"),self.onCloseCallbackParams&&(console.log(self.onCloseCallbackParams),onCloseCallback(self.onCloseCallbackParams),console.log("Show:"+onCloseCallback),self.onCloseCallbackParams={},console.log(self.onCloseCallbackParams)),$("#"+id).unbind())}),$("#"+id).on("shown.bs.modal",function(){setContent(),"function"==typeof onShowCallback&&onShowCallback(onShowCallbackParams)})}),icbs.Dependencies.Ajax.addLoadEvent(function(){})};