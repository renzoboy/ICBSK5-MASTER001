function callback(success){success?(willShow=!0,ajax=!1,$("#errorList").empty(),$(target).tab("show")):(willShow=!1,ajax=!1)}var target,relatedTarget,ajax=!1,willShow=!1,bypass=!1;$(document).ready(function(){icbs.Customer.Form.Validation.focusError(),$('a[data-toggle="tab"]').on("show.bs.tab",function(e){return console.log("umabot sa show"),willShow===!0?(willShow=!1,!0):(target=e.target,targetHref=$(e.target).attr("href"),relatedTarget=e.relatedTarget,relatedTargetHref=$(e.relatedTarget).attr("href"),target===relatedTarget?(alert("pumasok sa same target"),!1):(ajax===!1&&(bypass?(console.log("umabot dito"),bypass=!1,callback(!0)):"#tab_1"===relatedTargetHref&&(ajax=!0,customerVerificationValidation()),"#tab_2"===relatedTargetHref&&(ajax=!0,customerOtherDetailsValidation()),"#tab_3"===relatedTargetHref&&(ajax=!0,customerContactDetailsValidation()),"#tab_4"===relatedTargetHref&&(ajax=!0,customerAddressValidation()),"#tab_10"===relatedTargetHref&&(ajax=!0,customerBeneficiaryValidation()),"#tab_11"===relatedTargetHref&&(ajax=!0,customerInsuranceValidation()),"#tab_5"===relatedTargetHref&&(ajax=!0,customerBusinessAndEmploymentValidation()),"#tab_7"===relatedTargetHref&&(ajax=!0,customerEducationValidation()),"#tab_8"===relatedTargetHref&&callback(!0),"#tab_9"===relatedTargetHref&&(ajax=!0,customerPresentedIdAndOtherAcctValidation()),ajax===!0&&(willShow=!1)),willShow))})}),ns("icbs.Customer"),ns("icbs.Customer.Form"),ns("icbs.Customer.Form.Validation"),icbs.Customer.Form.Validation.focusError=function(tabNo){var hasError=!1,focusError=null,focusTarget=null;if(null!=tabNo)return $("div,input",$("#tab_"+tabNo)).each(function(){$(this).hasClass("has-error")&&(hasError=!0,$("#tabLi"+tabNo).addClass("red"),null===focusTarget&&(focusTarget=$(this)))}),hasError===!1?$("#tabLi"+tabNo).removeClass("red"):focusTarget.focus(),hasError;for(i=1;10>i;i++)hasError=!1,$("div,input",$("#tab_"+i)).each(function(){$(this).hasClass("has-error")&&(hasError=!0,$("#tabLi"+i).addClass("red"),null===focusError&&(focusError="#tabLi"+i))}),hasError===!1&&$("#tab_"+i).removeClass("red");return void(null!==focusError&&$(focusError).tab("show"))},icbs.Customer.Form.Validation.validateForm=function(url,data,choice,onsubmit){var url=url,data=data,choice=choice,onsubmit=onsubmit||!1,validateCallback=function(data,params){if(console.log(params),console.log(data),params.choice&&1!==params.choice){$("#tab_"+params.choice).html(data);var withError=icbs.Customer.Form.Validation.focusError(params.choice);callback(!withError),datepickerInitializer()}else if(params.choice){if(1===params.choice&&!params.onsubmit){$("#tab_1").html(data.html);var withError=icbs.Customer.Form.Validation.focusError(params.choice);data.possibleDuplicate===!0?$("#customerDuplicateModal").modal("show"):callback(!withError),datepickerInitializer()}1===params.choice&&params.onsubmit&&($("#tab_1").html(data.html),data.possibleDuplicate===!0?(bypass=!0,$("#tabLi1").tab("show"),$("#customerDuplicateModal").modal("show")):$("#saveCustomerForm").submit())}else alert("Something is wrong, contact kr for information")};this.validate=function(){icbs.Dependencies.Ajax.run(1===choice?{url:url,params:data,callback:validateCallback,callbackParams:{choice:choice,onsubmit:onsubmit},dataType:"json"}:{url:url,params:data,callback:validateCallback,callbackParams:{choice:choice}})},this.validate()},icbs.Customer.Form.Events=function(){},icbs.Customer.Form.getForm=function(callThis,url,choice){var changeVerificationFormCallback=function(data){jQuery("#tab_1").html(data)},contactCallback=function(data,params){0===params.choice&&jQuery("#phoneList").append(data),1===params.choice&&jQuery("#emailList").append(data),2===params.choice&&jQuery("#socialMediaList").append(data),icbs.Customer.Form.getForm.contactCount++},addressCallback=function(data){jQuery("#addressList").append(data)},beneficiaryCallback=function(data){jQuery("#beneficiaryList").append(data)},attachmentCallback=function(data,params){0===params.choice,1===params.choice,2===params.choice&&jQuery("#otherList").append(data),icbs.Customer.Form.getForm.attachmentCount++},otheracctCallback=function(data){jQuery("#otherAcctList").append(data),icbs.Customer.Form.getForm.otherAcctCount++},presentedidCallback=function(data){jQuery("#presentedIdList").append(data),datepickerInitializer(),icbs.Customer.Form.getForm.presentedIdCount++},relationCallback=function(data,params){data.i?jQuery("#relation"+data.i).html(data.html):(0===params.choice&&jQuery("#spouseList").append(data.html),1===params.choice&&jQuery("#fatherList").append(data.html),2===params.choice&&jQuery("#motherList").append(data.html),3===params.choice&&jQuery("#otherRelationList").append(data.html),4===params.choice&&jQuery("#businessRelationList").append(data.html),icbs.Customer.Form.getForm.relationCount++),datepickerInitializer()},educationCallback=function(data,params){0===params.choice&&jQuery("#primaryList").append(data),1===params.choice&&jQuery("#secondaryList").append(data),2===params.choice&&jQuery("#collegeList").append(data),3===params.choice&&jQuery("#vocationalList").append(data),4===params.choice&&jQuery("#postGradList").append(data),icbs.Customer.Form.getForm.educationCount++},relationTestHelper=function(choice){var count,spouseLimit=1,fatherLimit=1,motherLimit=1;return 0===choice?(count=$(".relation-spouse").length,count>=spouseLimit?(alert("maximum allowed, cannot add more"),!1):((count===spouseLimit-1||count===spouseLimit)&&(document.getElementById("spouseAddButton").disabled=!0),!0)):1===choice?(count=$(".relation-father").length,count>=fatherLimit?(alert("maximum allowed, cannot add more"),!1):((count===fatherLimit-1||count===fatherLimit)&&(document.getElementById("fatherAddButton").disabled=!0),!0)):2===choice?(count=$(".relation-mother").length,count>=motherLimit?(alert("maximum allowed, cannot add more"),!1):((count===motherLimit-1||count===motherLimit)&&(document.getElementById("motherAddButton").disabled=!0),!0)):!0},get=function(callThis,url,choice){var count,l_count=$("."+callThis+"-div").length,ajax=icbs.Dependencies.Ajax;"changeVerificationForm"===callThis&&ajax.run({url:url,params:choice,callback:changeVerificationFormCallback}),"contact"===callThis&&(count=icbs.Customer.Form.getForm.contactCount,l_count>count&&(count=l_count),ajax.run({url:url,params:{i:count,choice:choice},callback:contactCallback,callbackParams:{choice:choice}})),"address"===callThis&&(count=icbs.Customer.Form.getForm.addressCount,l_count>count&&(count=l_count),ajax.run({url:url,params:{i:count,choice:choice},callback:addressCallback})),"beneficiary"===callThis&&(count=icbs.Customer.Form.getForm.beneficiaryCount,l_count>count&&(count=l_count),ajax.run({url:url,params:{i:count,choice:choice},callback:beneficiaryCallback})),"attachment"===callThis&&(count=icbs.Customer.Form.getForm.attachmentCount,l_count>count&&(count=l_count),ajax.run({url:url,params:{i:count,choice:choice},callback:attachmentCallback,callbackParams:{choice:choice}})),"otherAcct"===callThis&&(count=icbs.Customer.Form.getForm.otherAcctCount,l_count>count&&(count=l_count),ajax.run({url:url,params:{i:count},callback:otheracctCallback})),"presentedId"===callThis&&(count=icbs.Customer.Form.getForm.presentedIdCount,l_count>count&&(count=l_count),ajax.run({url:url,params:{i:count},callback:presentedidCallback})),"knownRelation"===callThis&&choice&&null!=choice.i&&null!=choice.customer2&&ajax.run({url:url,params:{i:choice.i,customer2:choice.customer2,choice:choice.choice},callback:relationCallback,dataType:"json"}),"relation"===callThis&&(count=icbs.Customer.Form.getForm.relationCount,l_count>count&&(count=l_count),relationTestHelper(choice.choice)&&ajax.run({url:url,params:{i:count,choice:choice.choice},callback:relationCallback,callbackParams:{choice:choice.choice},dataType:"json"})),"education"===callThis&&(count=icbs.Customer.Form.getForm.educationCount,l_count>count&&(count=l_count),ajax.run({url:url,params:{i:count,choice:choice},callback:educationCallback,callbackParams:{choice:choice}}))};get(callThis,url,choice)},icbs.Customer.Form.getForm.contactCount=0,icbs.Customer.Form.getForm.attachmentCount=0,icbs.Customer.Form.getForm.addressCount=0,icbs.Customer.Form.getForm.beneficiaryCount=0,icbs.Customer.Form.getForm.relationCount=0,icbs.Customer.Form.getForm.otherAcctCount=0,icbs.Customer.Form.getForm.presentedIdCount=0,icbs.Customer.Form.getForm.educationCount=0,ns("icbs.Customer.Form.Utilities"),icbs.Customer.Form.Utilities={radioCheckBox:function(e,choice){e=e||event;var cbxs,cb=e.srcElement||e.target,alwaysHasPrimary=!0;for(1===choice&&(cbxs=document.getElementsByClassName("phone-radio")),2===choice&&(cbxs=document.getElementsByClassName("email-radio"),alwaysHasPrimary=!1),3===choice&&(cbxs=document.getElementsByClassName("address-radio")),i=cbxs.length;i--;)cbxs[i].type&&"checkbox"===cbxs[i].type&&cbxs[i].id!==cb.id&&(cbxs[i].checked=!1);alwaysHasPrimary&&(cb.checked=!0)},appendToDisplayName:function(choice){choice=choice||1;var name5Value=document.getElementById("name5"),xname5Value=name5Value.options[name5Value.selectedIndex].text,initial="";2===choice?$("#displayName").attr("value",$("#name1").val()):(""!==$("#name4").val()&&(initial="("+$("#name4").val()+")"),$("#displayName").attr("value",$("#name1").val()+" "+$("#name2").val()+" "+$("#name3").val()+" "+xname5Value+" "+initial)),$("h1 .customerName").empty(),$("h1 .customerName").append($("#displayName").val())},bindDelete:function(caller,parentClass){var temp=confirm("Are you sure you want to delete this item?");if(!temp)return!1;var prnt=$(caller).parents(parentClass),delInput=prnt.find("input[id$=deleted]"),newValue=prnt.find("input[id$=new]").attr("value");if(prnt.hasClass("address-div")){var radio=prnt.find(".address-radio").first().is(":checked");if(radio)return alert("You Cannot delete the Primary Address, Please choose another Address as Primary Before Deleting"),!1}if(prnt.hasClass("contact-div")){var radio=prnt.find(".phone-radio").first().is(":checked");if(radio)return alert("You Cannot delete the Primary Contact Number,Please choose another Contact Number as Primary Before Deleting"),!1;var radio=prnt.find(".email-radio").first().is(":checked");if(radio)return alert("You Cannot delete the Primary Email Address,Please choose another Email Address as Primary or UNSET this Email Address as Primary before Deleting"),!1}if($(caller).hasClass("relation-spouse-delete")){var child=prnt.find(".relation-spouse");$(child).removeClass("relation-spouse"),document.getElementById("spouseAddButton").disabled=!1}if($(caller).hasClass("relation-father-delete")){var child=prnt.find(".relation-parent");$(child).removeClass("relation-parent"),document.getElementById("fatherAddButton").disabled=!1}if($(caller).hasClass("relation-mother-delete")){var child=prnt.find(".relation-parent");$(child).removeClass("relation-parent"),document.getElementById("motherAddButton").disabled=!1}"true"===newValue?prnt.remove():(delInput.attr("value","true"),prnt.hide())}},ns("icbs.Customer"),icbs.Customer.Reports=function(){},ns("icbs.Customer.Inquiry"),icbs.Customer.Inquiry.Update=function(callThis,url,params){var inquiryFormCallback=function(data){jQuery("#customerInquiryFormDiv").html(data.inquiryForm),jQuery("#actionsDiv").html(data.actions)},statusUpdateCallback=function(data){jQuery("#updateStatusDiv").html(data)},creditLimitUpdateCallback=function(data){jQuery("#updateCreditLimitDiv").html(data)},membershipUpdateCallback=function(data){jQuery("#updateMembershipDiv").html(data)},sendUpdate=function(callThis,url,params){var ajax=icbs.Dependencies.Ajax;"inquiryForm"===callThis&&ajax.run({url:url,params:params,callback:inquiryFormCallback,dataType:"json"}),"creditLimit"===callThis&&ajax.run({url:url,params:params,callback:creditLimitUpdateCallback}),"status"===callThis&&ajax.run({url:url,params:params,callback:statusUpdateCallback}),"membership"===callThis&&ajax.run({url:url,params:params,callback:membershipUpdateCallback})};sendUpdate(callThis,url,params)},icbs.Customer.Inquiry.Update.getForm=function(callThis,url,params){var getCreditLimitFormCallback=function(data){jQuery("#updateCustomerCreditLimitModal .modal-body #updateCreditLimitDiv").html(data),$("#updateCustomerCreditLimitModal").modal({show:!0})},getStatusFormCallback=function(data){jQuery("#updateCustomerStatusModal .modal-body #updateStatusDiv").html(data),$("#updateCustomerStatusModal").modal({show:!0})},getMembershipFormCallback=function(data){jQuery("#updateCustomerMembershipModal .modal-body #updateMembershipDiv").html(data),$("#updateCustomerMembershipModal").modal({show:!0})},get=function(callThis,url,params){var ajax=icbs.Dependencies.Ajax;"creditLimit"===callThis&&ajax.run({url:url,params:params,callback:getCreditLimitFormCallback}),"status"===callThis&&ajax.run({url:url,params:params,callback:getStatusFormCallback}),"membership"===callThis&&ajax.run({url:url,params:params,callback:getMembershipFormCallback})};get(callThis,url,params)},icbs.Customer.Relation=function(callThis,url,params){var relationFormCallback=function(data){jQuery("#showRelatedFormDiv").html(data)},addRelationCallback=function(data){jQuery("#createRelatedDiv").html(data),$("#addRelationshipModal").modal({show:!0})},saveRelationCallback=function(data){jQuery("#createRelatedDiv").html(data)},editRelationCallback=function(data){jQuery("#editRelatedDiv").html(data),$("#editRelationshipModal").modal({show:!0})},updateRelationCallback=function(data){jQuery("#editRelatedDiv").html(data)},sendUpdate=function(callThis,url,params){var ajax=icbs.Dependencies.Ajax;"relationForm"===callThis&&ajax.run({url:url,params:params,callback:relationFormCallback}),"add"===callThis&&ajax.run({url:url,params:params,callback:addRelationCallback}),"save"===callThis&&ajax.run({url:url,params:params,callback:saveRelationCallback}),"edit"===callThis&&ajax.run({url:url,params:params,callback:editRelationCallback}),"update"===callThis&&ajax.run({url:url,params:params,callback:updateRelationCallback})};sendUpdate(callThis,url,params)};